"use strict";(self.webpackChunkxtd=self.webpackChunkxtd||[]).push([[4900],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),d=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=d(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=d(n),g=a,m=p["".concat(l,".").concat(g)]||p[g]||u[g]||s;return n?r.createElement(m,i(i({ref:t},c),{},{components:n})):r.createElement(m,i({ref:t},c))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,i=new Array(s);i[0]=p;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var d=2;d<s;d++)i[d]=n[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},38469:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var r=n(87462),a=(n(67294),n(3905));const s={},i="Delegates and lambdas",o={unversionedId:"documentation/Guides/xtd.core/delegates_and_lambdas",id:"documentation/Guides/xtd.core/delegates_and_lambdas",title:"Delegates and lambdas",description:"Delegates define a type that specifies a particular method signature.",source:"@site/docs/documentation/Guides/xtd.core/delegates_and_lambdas.md",sourceDirName:"documentation/Guides/xtd.core",slug:"/documentation/Guides/xtd.core/delegates_and_lambdas",permalink:"/xtd/docs/documentation/Guides/xtd.core/delegates_and_lambdas",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Console applications (xtd.core)",permalink:"/xtd/docs/documentation/Guides/xtd.core/console_class"},next:{title:"Interfaces",permalink:"/xtd/docs/documentation/Guides/xtd.core/interfaces"}},l={},d=[],c={toc:d};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"delegates-and-lambdas"},"Delegates and lambdas"),(0,a.kt)("p",null,"Delegates define a type that specifies a particular method signature.\nA method (instance, functor, static) that satisfies this signature can be assigned to a variable of this type and then called directly (with the appropriate arguments) or passed as an argument to another method and then called."),(0,a.kt)("p",null,"The following example demonstrates the use of delegates with instance method."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cpp"},'#include <xtd/xtd>\n\nusing namespace xtd;\n\nclass stringer {\npublic:\n  string reverse_string(const string& s) {\n    string result = s;\n    std::reverse(result.begin(), result.end());\n    return result;\n  }\n};\n\nclass program {\npublic:\n  using reverse = delegate<string(const string& s)>;\n  \n  static auto main(const std::vector<string>& args) {\n    stringer s;\n    reverse rev(s, &stringer::reverse_string);\n    \n    console::write_line(rev("a string"));\n  }\n};\n\nstartup_(program::main);\n')),(0,a.kt)("p",null,"The following example demonstrates the use of delegates with functor."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cpp"},'#include <xtd/xtd>\n\nusing namespace xtd;\n\nstruct string_reverser {\n  string operator ()(const string& s) {\n    string result = s;\n    std::reverse(result.begin(), result.end());\n    return result;\n  }\n};\n\nclass program {\npublic:\n  using reverse = delegate<string(const string& s)>;\n  \n  static auto main(const std::vector<string>& args) {\n    string_reverser sr;\n    reverse rev(sr);\n    \n    console::write_line(rev("a string"));\n  }\n};\n\nstartup_(program::main);\n')),(0,a.kt)("p",null,"The following example demonstrates the use of delegates with static method."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cpp"},'#include <xtd/xtd>\n\nusing namespace xtd;\n\nclass program {\npublic:\n  using reverse = delegate<string(const string& s)>;\n  \n  static string reverse_string(const string& s) {\n    string result = s;\n    std::reverse(result.begin(), result.end());\n    return result;\n  }\n  \n  static auto main(const std::vector<string>& args) {\n    reverse rev(reverse_string);\n    \n    console::write_line(rev("a string"));\n  }\n};\n\nstartup_(program::main);\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"using reverse = delegate<string(const string& s)>;")," line creates a delegate type of a certain signature, in this case a method that takes a string parameter and then returns a string parameter."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"static string reverse_string(const string& s)")," method, which has the exact same signature as the defined delegate type, implements the delegate."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"reverse rev(reverse_string);")," line shows that you can assign a method to a variable of the corresponding delegate type."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},'console::write_line(rev("a string"));')," line demonstrates how to use a variable of a delegate type to invoke the delegate.")),(0,a.kt)("p",null,"In order to streamline the development process, xtd includes a set of delegate types that programmers can reuse and not have to create new types.\nThese types are ",(0,a.kt)("inlineCode",{parentName:"p"},"xtd::func<>"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"xtd::action<>")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"xtd::predicate<>"),", and they can be used without having to define new delegate types.\nThere are some differences between the three types that have to do with the way they were intended to be used:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"xtd::action<>")," is used when there is a need to perform an action using the arguments of the delegate. The method it encapsulates does not return a value."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"xtd::func<>")," is used usually when you have a transformation on hand, that is, you need to transform the arguments of the delegate into a different result. Projections are a good example. The method it encapsulates returns a specified value."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"xtd::predicate<>")," is used when you need to determine if the argument satisfies the condition of the delegate. It can also be written as a ",(0,a.kt)("inlineCode",{parentName:"li"},"xtd::func<bool, type_t>"),", which means the method returns a boolean value.")),(0,a.kt)("p",null,"We can now take our example above and rewrite it using the ",(0,a.kt)("inlineCode",{parentName:"p"},"xtd::func<>")," delegate instead of a custom type.\nThe program will continue running exactly the same."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cpp"},'#include <xtd/xtd>\n\nusing namespace xtd;\n\nclass program {\npublic:\n  static string reverse_string(const string& s) {\n    string result = s;\n    std::reverse(result.begin(), result.end());\n    return result;\n  }\n  \n  static auto main(const std::vector<string>& args) {\n    func<string, const string&> rev(reverse_string);\n    \n    console::write_line(rev("a string"));\n  }\n};\n\nstartup_(program::main);\n')),(0,a.kt)("p",null,"For this simple example, having a method defined outside of the ",(0,a.kt)("inlineCode",{parentName:"p"},"main")," method seems a bit superfluous. c++11 introduced the concept of ",(0,a.kt)("a",{parentName:"p",href:"https://en.cppreference.com/w/cpp/language/lambda"},"lambda expressions"),", which let you create ",(0,a.kt)("inlineCode",{parentName:"p"},"inline")," methods without having to specify any additional type or method."),(0,a.kt)("p",null,"We can now take our example above and rewrite it using a lambda expression.\nThe program will continue running exactly the same."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cpp"},'#include <xtd/xtd>\n\nusing namespace xtd;\n\nclass program {\npublic:\n  static auto main(const std::vector<string>& args) {\n    func<string, const string&> rev([](auto s) {\n      string result = s;\n      std::reverse(result.begin(), result.end());\n      return result;\n    });\n    \n    console::write_line(rev("a string"));\n  }\n};\n\nstartup_(program::main);\n')),(0,a.kt)("p",null,"As you can see, the delegate body is just a set of expressions, like any other delegate.\nBut instead of making it a separate definition, we introduced it ad hoc in the creation of ",(0,a.kt)("inlineCode",{parentName:"p"},"func<string, const string&> rev"),"."),(0,a.kt)("h1",{id:"see-also"},"See also"),(0,a.kt)("p",null,"\u200b"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/documentation/Guides"},"Guides")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/documentation"},"Documentation"))))}u.isMDXComponent=!0}}]);