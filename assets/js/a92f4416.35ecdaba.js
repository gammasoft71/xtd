"use strict";(self.webpackChunkxtd=self.webpackChunkxtd||[]).push([[6591],{91971:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>f});var r=n(76687);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),p=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},l=function(e){var t=p(e.components);return r.createElement(c.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),m=p(n),u=o,f=m["".concat(c,".").concat(u)]||m[u]||d[u]||i;return n?r.createElement(f,a(a({ref:t},l),{},{components:n})):r.createElement(f,a({ref:t},l))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[m]="string"==typeof e?e:o,a[1]=s;for(var p=2;p<i;p++)a[p]=n[p];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},61431:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var r=n(855),o=(n(76687),n(91971));const i={},a="Exceptions and Performance",s={unversionedId:"documentation/Design Guidelines/Design Guidelines for Exception/exceptions_and_performance",id:"documentation/Design Guidelines/Design Guidelines for Exception/exceptions_and_performance",title:"Exceptions and Performance",description:"One common concern related to exceptions is that if exceptions are used for code that routinely fails, the performance of the implementation will be unacceptable. This is a valid concern. When a member throws an exception, its performance can be orders of magnitude slower. However, it is possible to achieve good performance while strictly adhering to the exception guidelines that disallow using error codes. Two patterns described in this section suggest ways to do this.",source:"@site/docs/documentation/Design Guidelines/Design Guidelines for Exception/exceptions_and_performance.md",sourceDirName:"documentation/Design Guidelines/Design Guidelines for Exception",slug:"/documentation/Design Guidelines/Design Guidelines for Exception/exceptions_and_performance",permalink:"/xtd/docs/documentation/Design Guidelines/Design Guidelines for Exception/exceptions_and_performance",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Exception Throwing",permalink:"/xtd/docs/documentation/Design Guidelines/Design Guidelines for Exception/exception_throwing"},next:{title:"Using Standard Exception Types",permalink:"/xtd/docs/documentation/Design Guidelines/Design Guidelines for Exception/using_standard_exception_types"}},c={},p=[],l={toc:p},m="wrapper";function d(e){let{components:t,...n}=e;return(0,o.kt)(m,(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"exceptions-and-performance"},"Exceptions and Performance"),(0,o.kt)("p",null,"One common concern related to exceptions is that if exceptions are used for code that routinely fails, the performance of the implementation will be unacceptable. This is a valid concern. When a member throws an exception, its performance can be orders of magnitude slower. However, it is possible to achieve good performance while strictly adhering to the exception guidelines that disallow using error codes. Two patterns described in this section suggest ways to do this."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u274c DO NOT")," use error codes because of concerns that exceptions might affect performance negatively."),(0,o.kt)("p",null,"To improve performance, it is possible to use either the ",(0,o.kt)("em",{parentName:"p"},"Tester-Doer")," Pattern or the ",(0,o.kt)("em",{parentName:"p"},"Try-Parse")," Pattern, described in the next two sections."),(0,o.kt)("h1",{id:"tester-doer-pattern"},"Tester-Doer Pattern"),(0,o.kt)("p",null,"Sometimes performance of an exception-throwing member can be improved by breaking the member into two. Let\u2019s look at the at method of the std::vector<type_t> interface."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp"},"std::vector<int> numbers = ...\nauto val = numbers.at(9);\n")),(0,o.kt)("p",null,"The method at throws if the collection is size < 10. This can be a performance problem in scenarios where the method call is expected to fail often. One of the ways to mitigate the problem is to test whether the vector size is >= 10 before trying to get a value."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp"},"std::vector<int> numbers = ...\n...\nif (numbers.size() >= 10) {\n  auto val = numbers.at(9);\n}\n")),(0,o.kt)("p",null,"The member used to test a condition, which in our example is the property size, is referred to as the tester. The member used to perform a potentially throwing operation, the at method in our example, is referred to as the doer."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u2714\ufe0f CONSIDER")," the Tester-Doer Pattern for members that might throw exceptions in common scenarios to avoid performance problems related to exceptions."),(0,o.kt)("h1",{id:"try-parse-pattern"},"Try-parse Pattern"),(0,o.kt)("p",null,"For extremely performance-sensitive APIs, an even faster pattern than the ",(0,o.kt)("em",{parentName:"p"},"Tester-Doer")," Pattern described in the previous section should be used. The pattern calls for adjusting the member name to make a well-defined test case a part of the member semantics. For example, xtd::date_time defines a parse method that throws an exception if parsing of a string fails. It also defines a corresponding try_parse method that attempts to parse, but returns false if parsing is unsuccessful and returns the result of a successful parsing using an ref parameter."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp"},"struct date_time : public object {\n  public:\n  static date_time parse(const string& date_time) {\n    ...\n  }\n  \n  static bool try_parse(const string& dateTime, date_time& result) noexcept {\n    ...\n  }\n};\n")),(0,o.kt)("p",null,"When using this pattern, it is important to define the try functionality in strict terms. If the member fails for any reason other than the well-defined try, the member must still throw a corresponding exception."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u2714\ufe0f CONSIDER")," the ",(0,o.kt)("em",{parentName:"p"},"Try-Parse")," Pattern for members that might throw exceptions in common scenarios to avoid performance problems related to exceptions."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u2714\ufe0f DO"),' use the prefix "try_" and boolean return type for methods implementing this pattern.'),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u2714\ufe0f DO")," provide an exception-throwing member for each member using the ",(0,o.kt)("em",{parentName:"p"},"Try-Parse")," Pattern."),(0,o.kt)("h1",{id:"see-also"},"See also"),(0,o.kt)("p",null,"\u200b"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/docs/documentation/Design%20Guidelines/Design%20Guidelines%20for%20Exception"},"Design Guidelines for Exception")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/docs/documentation/Design%20Guidelines"},"Design Guidelines")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/docs/documentation"},"Documentation"))))}d.isMDXComponent=!0}}]);