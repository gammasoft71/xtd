"use strict";(self.webpackChunkxtd=self.webpackChunkxtd||[]).push([[7295],{91971:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>g});var a=t(76687);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,s=function(e,n){if(null==e)return{};var t,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(s[t]=e[t]);return s}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var l=a.createContext({}),u=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=u(e.components);return a.createElement(l.Provider,{value:n},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,s=e.mdxType,r=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=u(t),c=s,g=d["".concat(l,".").concat(c)]||d[c]||m[c]||r;return t?a.createElement(g,i(i({ref:n},p),{},{components:t})):a.createElement(g,i({ref:n},p))}));function g(e,n){var t=arguments,s=n&&n.mdxType;if("string"==typeof e||s){var r=t.length,i=new Array(r);i[0]=c;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o[d]="string"==typeof e?e:s,i[1]=o;for(var u=2;u<r;u++)i[u]=t[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},20357:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>u});var a=t(855),s=(t(76687),t(91971));const r={},i="Enum Design",o={unversionedId:"documentation/Design Guidelines/Type Design Guidelines/enum_design",id:"documentation/Design Guidelines/Type Design Guidelines/enum_design",title:"Enum Design",description:"Enums are a special kind of value type. There are two kinds of enums: simple enums and flag enums.",source:"@site/docs/documentation/Design Guidelines/Type Design Guidelines/enum_design.md",sourceDirName:"documentation/Design Guidelines/Type Design Guidelines",slug:"/documentation/Design Guidelines/Type Design Guidelines/enum_design",permalink:"/xtd/docs/documentation/Design Guidelines/Type Design Guidelines/enum_design",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Choosing Between Class and Struct",permalink:"/xtd/docs/documentation/Design Guidelines/Type Design Guidelines/choosing_between_class_and_struct"},next:{title:"Interface Design",permalink:"/xtd/docs/documentation/Design Guidelines/Type Design Guidelines/interface_design"}},l={},u=[],p={toc:u},d="wrapper";function m(e){let{components:n,...t}=e;return(0,s.kt)(d,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"enum-design"},"Enum Design"),(0,s.kt)("p",null,"Enums are a special kind of value type. There are two kinds of enums: simple enums and flag enums."),(0,s.kt)("p",null,"Simple enums represent small closed sets of choices. A common example of the simple enum is a set of colors."),(0,s.kt)("p",null,"Flag enums are designed to support bitwise operations on the enum values. A common example of the flags enum is a list of options."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u2714\ufe0f DO")," use an enum to strongly type parameters, properties, and return values that represent sets of values."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u2714\ufe0f DO")," favor using an enum instead of static constants."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u274c DO NOT")," use an enum for open sets (such as the operating system version, names of your friends, etc.)."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u274c DO NOT")," provide reserved enum values that are intended for future use."),(0,s.kt)("p",null,"You can always simply add values to the existing enum at a later stage. See ",(0,s.kt)("a",{parentName:"p",href:"#adding-values"},"Adding Values")," to Enums for more details on adding values to enums. Reserved values just pollute the set of real values and tend to lead to user errors."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u274c AVOID")," publicly exposing enums with only one value."),(0,s.kt)("p",null,"A common practice for ensuring future extensibility of C APIs is to add reserved parameters to method signatures. Such reserved parameters can be expressed as enums with a single default value. This should not be done in managed APIs. Method overloading allows adding parameters in future releases."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u274c DO NOT")," include sentinel values in enums."),(0,s.kt)("p",null,"Although they are sometimes helpful to framework developers, sentinel values are confusing to users of the framework. They are used to track the state of the enum rather than being one of the values from the set represented by the enum."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u2714\ufe0f DO")," provide a value of zero on simple enums."),(0,s.kt)("p",null,'Consider calling the value something like "none". If such a value is not appropriate for this particular enum, the most common default value for the enum should be assigned the underlying value of zero.'),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u2714\ufe0f CONSIDER")," using int as the underlying type of an enum unless any of the following is true:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"The enum is a flags enum and you have more than 32 flags, or expect to have more in the future."),(0,s.kt)("li",{parentName:"ul"},"The underlying type needs to be different than int32 for easier interoperability with unmanaged code expecting different-size enums."),(0,s.kt)("li",{parentName:"ul"},"A smaller underlying type would result in substantial savings in space. If you expect the enum to be used mainly as an argument for flow of control, the size makes little difference. The size savings might be significant if:"),(0,s.kt)("li",{parentName:"ul"},"You expect the enum to be used as a field in a very frequently instantiated structure or class."),(0,s.kt)("li",{parentName:"ul"},"You expect users to create large arrays or collections of the enum instances."),(0,s.kt)("li",{parentName:"ul"},"You expect a large number of instances of the enum to be serialized. For in-memory usage, be aware that managed objects are always DWORD-aligned, so you effectively need multiple enums or other small structures in an instance to pack a smaller enum with in order to make a difference, because the total instance size is always going to be rounded up to a DWORD.")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u2714\ufe0f DO")," name flag enums with plural nouns or noun phrases and simple enums with singular nouns or noun phrases."),(0,s.kt)("h1",{id:"designing-flag-enums"},"Designing Flag Enums"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u2714\ufe0f DO")," use powers of two for the flag enum values so they can be freely combined using the bitwise OR operation."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u2714\ufe0f CONSIDER")," providing special enum values for commonly used combinations of flags."),(0,s.kt)("p",null,"Bitwise operations are an advanced concept and should not be required for simple tasks. ReadWrite is an example of such a special value."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u274c AVOID")," creating flag enums where certain combinations of values are invalid."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u274c AVOID"),' using flag enum values of zero unless the value represents "all flags are cleared" and is named appropriately, as prescribed by the next guideline.'),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u2714\ufe0f DO"),' name the zero value of flag enums "none". For a flag enum, the value must always mean "all flags are cleared."'),(0,s.kt)("h1",{id:"adding-value-to-enums"},"Adding Value to Enums"),(0,s.kt)("p",null,"It is very common to discover that you need to add values to an enum after you have already shipped it. There is a potential application compatibility problem when the newly added value is returned from an existing API, because poorly written applications might not handle the new value correctly."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u2714\ufe0f CONSIDER")," adding values to enums, despite a small compatibility risk."),(0,s.kt)("p",null,"If you have real data about application incompatibilities caused by additions to an enum, consider adding a new API that returns the new and old values, and deprecate the old API, which should continue returning just the old values. This will ensure that your existing applications remain compatible."),(0,s.kt)("h1",{id:"see-also"},"See also"),(0,s.kt)("p",null,"\u200b"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/documentation/Design%20Guidelines/Type%20Design%20Guidelines"},"Type Design Guidelines")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/documentation/Design%20Guidelines"},"Design Guidelines")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/documentation"},"Documentation"))))}m.isMDXComponent=!0}}]);