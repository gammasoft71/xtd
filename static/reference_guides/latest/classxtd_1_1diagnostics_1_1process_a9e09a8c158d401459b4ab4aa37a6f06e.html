<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<title>xtd: xtd::diagnostics::process::standard_error</title>
    <link href="favicon.png" rel="shortcut icon" type="image/png"/>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
		<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom_images.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript"> DoxygenAwesomeDarkModeToggle.init() </script>
	</head>
	<body>
  <div id="page_container">
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
      <table cellspacing="0" cellpadding="0" style="width: 100%;">
				<tbody>
					<tr>
						<td id="projectlogo">
						  <a href="https://gammasoft71.github.io/xtd/" target="_new">
						    <img alt="Logo" src="xtd_doxygen.png"/>
						  </a>
						</td>
						<td id="projectalign" style="padding-left: 0.5em; text-align: right;">
							<div id="projectname">xtd
								<span id="projectnumber">0.2.0</span>
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="contents">
<a id="a9e09a8c158d401459b4ab4aa37a6f06e" name="a9e09a8c158d401459b4ab4aa37a6f06e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e09a8c158d401459b4ab4aa37a6f06e">&#9670;&#160;</a></span>standard_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::istream &amp; xtd::diagnostics::process::standard_error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a stream used to read the error output of the application. </p>
<dl class="section return"><dt>Returns</dt><dd>A std::istream that can be used to read the standard error stream of the application. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classxtd_1_1invalid__operation__exception.html" title="The exception that is thrown when a method call is invalid for the object&#39;s current state.">xtd::invalid_operation_exception</a></td><td>There is no process associated with this <a class="el" href="classxtd_1_1diagnostics_1_1process.html" title="Provides access to local and remote processes and enables you to start and stop local system processe...">xtd::diagnostics::process</a> object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Examples</dt><dd>The following example uses the net use command together with a user supplied argument to map a network resource. It then reads the standard error stream of the net command and writes it to console. <div class="fragment"><div class="line"><a class="code hl_define" href="group__keywords_ga9ba81b3bf268ec1eb95752f516f563e9.html#ga9ba81b3bf268ec1eb95752f516f563e9">block_scope_</a>(<a class="code hl_class" href="classxtd_1_1diagnostics_1_1process.html">xtd::diagnostics::process</a> my_process) {</div>
<div class="line">  <a class="code hl_class" href="classxtd_1_1diagnostics_1_1process__start__info.html">xtd::diagnostics::process_start_info</a> my_process_start_info(<span class="stringliteral">&quot;net &quot;</span>, <span class="stringliteral">&quot;use &quot;</span> + args[0]);</div>
<div class="line"> </div>
<div class="line">  my_process_start_info.use_shell_execute(<span class="keyword">false</span>);</div>
<div class="line">  my_process_start_info.redirect_standard_error(<span class="keyword">true</span>);</div>
<div class="line">  my_process.<a class="code hl_function" href="classxtd_1_1diagnostics_1_1process_a764c6d95b61925b947ff01f150ea9ae4.html#a764c6d95b61925b947ff01f150ea9ae4">start_info</a>(my_process_start_info);</div>
<div class="line">  my_process.<a class="code hl_function" href="classxtd_1_1diagnostics_1_1process_ad2e7a8e4f20f883bda963515cd8e5e44.html#ad2e7a8e4f20f883bda963515cd8e5e44">start</a>();</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_class" href="classxtd_1_1io_1_1stream__reader.html">xtd::io::stream_reader</a> my_stream_reader(my_process.<a class="code hl_function" href="classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html#a9e09a8c158d401459b4ab4aa37a6f06e">standard_error</a>());</div>
<div class="line">  <span class="comment">// Read the standard error of net.exe and write it on to console.</span></div>
<div class="line">  <a class="code hl_function" href="classxtd_1_1console_ae0ccd7fef284ccda33a88576c8a35a37.html#ae0ccd7fef284ccda33a88576c8a35a37">xtd::console::write_line</a>(my_stream_reader.read_line());</div>
<div class="line">}</div>
<div class="ttc" id="aclassxtd_1_1console_ae0ccd7fef284ccda33a88576c8a35a37_html_ae0ccd7fef284ccda33a88576c8a35a37"><div class="ttname"><a href="classxtd_1_1console_ae0ccd7fef284ccda33a88576c8a35a37.html#ae0ccd7fef284ccda33a88576c8a35a37">xtd::console::write_line</a></div><div class="ttdeci">static void write_line()</div><div class="ttdoc">Writes the current line terminator to the standard output stream using the specified format informati...</div></div>
<div class="ttc" id="aclassxtd_1_1diagnostics_1_1process__start__info_html"><div class="ttname"><a href="classxtd_1_1diagnostics_1_1process__start__info.html">xtd::diagnostics::process_start_info</a></div><div class="ttdoc">Specifies a set of values that are used when you start a process.</div><div class="ttdef"><b>Definition</b> process_start_info.h:39</div></div>
<div class="ttc" id="aclassxtd_1_1diagnostics_1_1process_a764c6d95b61925b947ff01f150ea9ae4_html_a764c6d95b61925b947ff01f150ea9ae4"><div class="ttname"><a href="classxtd_1_1diagnostics_1_1process_a764c6d95b61925b947ff01f150ea9ae4.html#a764c6d95b61925b947ff01f150ea9ae4">xtd::diagnostics::process::start_info</a></div><div class="ttdeci">const xtd::diagnostics::process_start_info &amp; start_info() const</div><div class="ttdoc">Gets the properties to pass to the xtd::diagnostics::process::start() method of the xtd::diagnostics:...</div></div>
<div class="ttc" id="aclassxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e_html_a9e09a8c158d401459b4ab4aa37a6f06e"><div class="ttname"><a href="classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html#a9e09a8c158d401459b4ab4aa37a6f06e">xtd::diagnostics::process::standard_error</a></div><div class="ttdeci">std::istream &amp; standard_error()</div><div class="ttdoc">Gets a stream used to read the error output of the application.</div></div>
<div class="ttc" id="aclassxtd_1_1diagnostics_1_1process_ad2e7a8e4f20f883bda963515cd8e5e44_html_ad2e7a8e4f20f883bda963515cd8e5e44"><div class="ttname"><a href="classxtd_1_1diagnostics_1_1process_ad2e7a8e4f20f883bda963515cd8e5e44.html#ad2e7a8e4f20f883bda963515cd8e5e44">xtd::diagnostics::process::start</a></div><div class="ttdeci">bool start()</div><div class="ttdoc">Starts (or reuses) the process resource that is specified by the xtd::diagnostics::process::start_inf...</div></div>
<div class="ttc" id="aclassxtd_1_1diagnostics_1_1process_html"><div class="ttname"><a href="classxtd_1_1diagnostics_1_1process.html">xtd::diagnostics::process</a></div><div class="ttdoc">Provides access to local and remote processes and enables you to start and stop local system processe...</div><div class="ttdef"><b>Definition</b> process.h:49</div></div>
<div class="ttc" id="aclassxtd_1_1io_1_1stream__reader_html"><div class="ttname"><a href="classxtd_1_1io_1_1stream__reader.html">xtd::io::stream_reader</a></div><div class="ttdoc">Implements a xtd::io::text_reader that reads characters from a byte stream.</div><div class="ttdef"><b>Definition</b> stream_reader.h:28</div></div>
<div class="ttc" id="agroup__keywords_ga9ba81b3bf268ec1eb95752f516f563e9_html_ga9ba81b3bf268ec1eb95752f516f563e9"><div class="ttname"><a href="group__keywords_ga9ba81b3bf268ec1eb95752f516f563e9.html#ga9ba81b3bf268ec1eb95752f516f563e9">block_scope_</a></div><div class="ttdeci">#define block_scope_(...)</div><div class="ttdoc">The specified expression is cleared automatically when the scope is ended.</div><div class="ttdef"><b>Definition</b> block_scope.h:25</div></div>
</div><!-- fragment --> </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>When a <a class="el" href="classxtd_1_1diagnostics_1_1process.html" title="Provides access to local and remote processes and enables you to start and stop local system processe...">xtd::diagnostics::process</a> writes text to its standard error stream, that text is normally displayed on the console. By redirecting the <a class="el" href="classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html#a9e09a8c158d401459b4ab4aa37a6f06e" title="Gets a stream used to read the error output of the application.">xtd::diagnostics::process::standard_error</a> stream, you can manipulate or suppress the error output of a process. For example, you can filter the text, format it differently, or write the output to both the console and a designated log file. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>To use <a class="el" href="classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html#a9e09a8c158d401459b4ab4aa37a6f06e" title="Gets a stream used to read the error output of the application.">xtd::diagnostics::process::standard_error</a>, you must set <a class="el" href="classxtd_1_1diagnostics_1_1process__start__info_afbe7913a04289abf0dcf6b51f6c0186b.html#afbe7913a04289abf0dcf6b51f6c0186b" title="Gets a value indicating whether to use the operating system shell to start the process.">xtd::diagnostics::process_start_info::use_shell_execute</a> to false, and you must set <a class="el" href="classxtd_1_1diagnostics_1_1process__start__info_a4a06a0294cb4293389f1dd3542b0741a.html#a4a06a0294cb4293389f1dd3542b0741a" title="Gets a value that indicates whether the error output of an application is written to the xtd::diagnos...">xtd::diagnostics::process_start_info::redirect_standard_error</a> to true. Otherwise, reading from the <a class="el" href="classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html#a9e09a8c158d401459b4ab4aa37a6f06e" title="Gets a stream used to read the error output of the application.">xtd::diagnostics::process::standard_error</a> stream throws an exception. </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>The redirected <a class="el" href="classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html#a9e09a8c158d401459b4ab4aa37a6f06e" title="Gets a stream used to read the error output of the application.">xtd::diagnostics::process::standard_error</a> stream can be read synchronously or asynchronously. Methods such as <a class="el" href="classxtd_1_1io_1_1stream__reader_a01290d6db05d857260e8b72c811bed0d.html#a01290d6db05d857260e8b72c811bed0d" title="Reads the next character from the input stream and advances the character position by one character.">xtd::io::stream_reader::read</a>, <a class="el" href="classxtd_1_1io_1_1text__reader_a9cf821e2697031031471e69c91cce0ca.html#a9cf821e2697031031471e69c91cce0ca" title="Reads a line of characters from the current stream and returns the data as a string.">xtd::io::stream_reader::read_line</a>, and <a class="el" href="classxtd_1_1io_1_1text__reader_a5814699d7ec7e5eada3a000f0b0475a6.html#a5814699d7ec7e5eada3a000f0b0475a6" title="Reads all characters from the current position to the end of the text_reader and returns them as one ...">xtd::io::stream_reader::read_to_end</a> perform synchronous read operations on the error output stream of the process. These synchronous read operations do not complete until the associated <a class="el" href="classxtd_1_1diagnostics_1_1process.html" title="Provides access to local and remote processes and enables you to start and stop local system processe...">xtd::diagnostics::process</a> writes to its <a class="el" href="classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html#a9e09a8c158d401459b4ab4aa37a6f06e" title="Gets a stream used to read the error output of the application.">xtd::diagnostics::process::standard_error</a> stream, or closes the stream. </dd>
<dd>
In contrast, xtd::diagnostics::process::begin_error_read_line starts asynchronous read operations on the <a class="el" href="classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html#a9e09a8c158d401459b4ab4aa37a6f06e" title="Gets a stream used to read the error output of the application.">xtd::diagnostics::process::standard_error</a> stream. This method enables a designated event handler for the stream output and immediately returns to the caller, which can perform other work while the stream output is directed to the event handler. </dd>
<dd>
Synchronous read operations introduce a dependency between the caller reading from the <a class="el" href="classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html#a9e09a8c158d401459b4ab4aa37a6f06e" title="Gets a stream used to read the error output of the application.">xtd::diagnostics::process::standard_error</a> stream and the child process writing to that stream. These dependencies can result in deadlock conditions. When the caller reads from the redirected stream of a child process, it is dependent on the child. The caller waits on the read operation until the child writes to the stream or closes the stream. When the child process writes enough data to fill its redirected stream, it is dependent on the parent. The child process waits on the next write operation until the parent reads from the full stream or closes the stream. The deadlock condition results when the caller and child process wait on each other to complete an operation, and neither can proceed. You can avoid deadlocks by evaluating dependencies between the caller and child process. </dd>
<dd>
The last two examples in this section use the xtd::diagnostics:process::start method to launch an executable named Write500Lines.exe. The following example contains its source code. <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;xtd/xtd&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacextd.html">xtd</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacextd_1_1io.html">xtd::io</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> main() -&gt; <span class="keywordtype">int</span> {</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ctr = 0; ctr &lt; 500; ctr++)</div>
<div class="line">    <a class="code hl_function" href="classxtd_1_1console_ae0ccd7fef284ccda33a88576c8a35a37.html#ae0ccd7fef284ccda33a88576c8a35a37">console::write_line</a>(<span class="stringliteral">&quot;Line {} of 500 written: {:P2}&quot;</span>, ctr + 1, (ctr + 1)/500.0);</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_variable" href="classxtd_1_1console_a07c2c9e615422f0ab7321b3331e83c73.html#a07c2c9e615422f0ab7321b3331e83c73">console::error</a> &lt;&lt; <span class="stringliteral">&quot;\nSuccessfully wrote 500 lines.\n&quot;</span>;</div>
<div class="line">}</div>
<div class="line"><span class="comment">// The example displays the following output:</span></div>
<div class="line"><span class="comment">//      The last 40 characters in the output stream are:</span></div>
<div class="line"><span class="comment">//      &#39;: 99.80%</span></div>
<div class="line"><span class="comment">//      Line 500 of 500 written: 100.00%</span></div>
<div class="line"><span class="comment">//      &#39;</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//      Successfully wrote 500 lines.</span></div>
<div class="ttc" id="aclassxtd_1_1console_a07c2c9e615422f0ab7321b3331e83c73_html_a07c2c9e615422f0ab7321b3331e83c73"><div class="ttname"><a href="classxtd_1_1console_a07c2c9e615422f0ab7321b3331e83c73.html#a07c2c9e615422f0ab7321b3331e83c73">xtd::console::error</a></div><div class="ttdeci">static std::ostream error</div><div class="ttdoc">Gets the error output stream. A std::basic_ostream&lt;char_t&gt; that represents the error output stream.</div><div class="ttdef"><b>Definition</b> console.h:42</div></div>
<div class="ttc" id="anamespacextd_1_1io_html"><div class="ttname"><a href="namespacextd_1_1io.html">xtd::io</a></div><div class="ttdoc">The xtd::io namespace contains types that allow reading and writing to files and data streams,...</div><div class="ttdef"><b>Definition</b> binary_reader.h:16</div></div>
<div class="ttc" id="anamespacextd_html"><div class="ttname"><a href="namespacextd.html">xtd</a></div><div class="ttdoc">The xtd namespace contains all fundamental classes to access Hardware, Os, System,...</div><div class="ttdef"><b>Definition</b> xtd_about_box.h:10</div></div>
</div><!-- fragment --> </dd>
<dd>
The following example shows how to read from a redirected error stream and wait for the child process to exit. It avoids a deadlock condition by calling stream_reader(p.standard_error()).read_to_end() before p.wait_for_exit. A deadlock condition can result if the parent process calls p.wait_for_exit before stream_reader(p.standard_error()).read_to_end() and the child process writes enough text to fill the redirected stream. The parent process would wait indefinitely for the child process to exit. The child process would wait indefinitely for the parent to read from the full <a class="el" href="classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html#a9e09a8c158d401459b4ab4aa37a6f06e" title="Gets a stream used to read the error output of the application.">xtd::diagnostics::process::standard_error</a> stream. <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;xtd/xtd&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacextd.html">xtd</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacextd_1_1diagnostics.html">xtd::diagnostics</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacextd_1_1io.html">xtd::io</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> main() -&gt; <span class="keywordtype">int</span> {</div>
<div class="line">  <span class="keyword">auto</span> <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a> = <a class="code hl_function" href="classxtd_1_1diagnostics_1_1process_a81ba433310fc43b2e2422753227e8b44.html#a81ba433310fc43b2e2422753227e8b44">process</a>();</div>
<div class="line">  <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.start_info().use_shell_execute(<span class="keyword">false</span>);</div>
<div class="line">  <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.start_info().redirect_standard_error(<span class="keyword">true</span>);</div>
<div class="line">  <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.start_info().file_name(<span class="stringliteral">&quot;write_500_lines&quot;</span>);</div>
<div class="line">  <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.start();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// To avoid deadlocks, always read the output stream first and then wait.</span></div>
<div class="line">  <span class="keywordtype">string</span> output = <a class="code hl_class" href="classxtd_1_1io_1_1stream__reader.html">stream_reader</a>(<a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.standard_error()).<a class="code hl_function" href="classxtd_1_1io_1_1text__reader_a5814699d7ec7e5eada3a000f0b0475a6.html#a5814699d7ec7e5eada3a000f0b0475a6">read_to_end</a>();</div>
<div class="line">  <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.wait_for_exit();</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_function" href="classxtd_1_1console_ae0ccd7fef284ccda33a88576c8a35a37.html#ae0ccd7fef284ccda33a88576c8a35a37">console::write_line</a>(<span class="stringliteral">&quot;\nError stream: {}&quot;</span>, output);</div>
<div class="line">}</div>
<div class="line"><span class="comment">// The end of the output produced by the example includes the following:</span></div>
<div class="line"><span class="comment">//      Error stream: Successfully wrote 500 lines.</span></div>
<div class="ttc" id="aclassxtd_1_1diagnostics_1_1process_a81ba433310fc43b2e2422753227e8b44_html_a81ba433310fc43b2e2422753227e8b44"><div class="ttname"><a href="classxtd_1_1diagnostics_1_1process_a81ba433310fc43b2e2422753227e8b44.html#a81ba433310fc43b2e2422753227e8b44">xtd::diagnostics::process::process</a></div><div class="ttdeci">process()</div><div class="ttdoc">Initializes a new instance of the xtd::diagnostics::process class.</div></div>
<div class="ttc" id="aclassxtd_1_1io_1_1text__reader_a5814699d7ec7e5eada3a000f0b0475a6_html_a5814699d7ec7e5eada3a000f0b0475a6"><div class="ttname"><a href="classxtd_1_1io_1_1text__reader_a5814699d7ec7e5eada3a000f0b0475a6.html#a5814699d7ec7e5eada3a000f0b0475a6">xtd::io::text_reader::read_to_end</a></div><div class="ttdeci">virtual xtd::string read_to_end()</div><div class="ttdoc">Reads all characters from the current position to the end of the text_reader and returns them as one ...</div></div>
<div class="ttc" id="agroup__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2_html_ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a"><div class="ttname"><a href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">xtd::console_key::p</a></div><div class="ttdeci">@ p</div><div class="ttdoc">The P key.</div></div>
<div class="ttc" id="anamespacextd_1_1diagnostics_html"><div class="ttname"><a href="namespacextd_1_1diagnostics.html">xtd::diagnostics</a></div><div class="ttdoc">The xtd::diagnostics namespace provides classes that allow you to interact with system processes,...</div><div class="ttdef"><b>Definition</b> assert_dialog_result.h:10</div></div>
</div><!-- fragment --> </dd>
<dd>
There is a similar issue when you read all text from both the standard output and standard error streams. The following example performs a read operation on both streams. It avoids the deadlock condition by performing asynchronous read operations on the <a class="el" href="classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html#a9e09a8c158d401459b4ab4aa37a6f06e" title="Gets a stream used to read the error output of the application.">xtd::diagnostics::process::standard_error</a> stream. A deadlock condition results if the parent process calls stream_reader(p.standard_output()).read_to_end() followed by stream_reader(p.standard_error()).read_to_end() and the child process writes enough text to fill its error stream. The parent process would wait indefinitely for the child process to close its <a class="el" href="classxtd_1_1diagnostics_1_1process_a2cda84618767aa8e357f49efc3186f4d.html#a2cda84618767aa8e357f49efc3186f4d" title="Gets a stream used to read the textual output of the application.">xtd::diagnostics::process::standard_output</a> stream. The child process would wait indefinitely for the parent to read from the full <a class="el" href="classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html#a9e09a8c158d401459b4ab4aa37a6f06e" title="Gets a stream used to read the error output of the application.">xtd::diagnostics::process::standard_error</a> stream. <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;xtd/xtd&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacextd.html">xtd</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacextd_1_1diagnostics.html">xtd::diagnostics</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacextd_1_1io.html">xtd::io</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> main() -&gt; <span class="keywordtype">int</span> {</div>
<div class="line">  <span class="keyword">auto</span> <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a> = <a class="code hl_function" href="classxtd_1_1diagnostics_1_1process_a81ba433310fc43b2e2422753227e8b44.html#a81ba433310fc43b2e2422753227e8b44">process</a>();</div>
<div class="line">  <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.start_info().use_shell_execute(<span class="keyword">false</span>);</div>
<div class="line">  <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.start_info().redirect_standard_output(<span class="keyword">true</span>);</div>
<div class="line">  <span class="keywordtype">string</span> e_out;</div>
<div class="line">  <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.start_info().redirect_standard_error(<span class="keyword">true</span>);</div>
<div class="line">  <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.error_data_received += [&amp;](<span class="keywordtype">object</span>&amp; sender, <span class="keyword">const</span> <a class="code hl_class" href="classxtd_1_1diagnostics_1_1data__received__event__args.html">data_received_event_args</a>&amp; <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2ae1671797c52e15f763380b45e841ec32">e</a>) {</div>
<div class="line">    e_out += <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2ae1671797c52e15f763380b45e841ec32">e</a>.data();</div>
<div class="line">  };</div>
<div class="line">  <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.start_info().file_name(<span class="stringliteral">&quot;write_500_lines&quot;</span>);</div>
<div class="line">  <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.start();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// To avoid deadlocks, always read the output stream first and then wait.</span></div>
<div class="line">  <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.begin_error_read_line();</div>
<div class="line">  <span class="keywordtype">string</span> output = <a class="code hl_class" href="classxtd_1_1io_1_1stream__reader.html">stream_reader</a>(<a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.standard_error()).<a class="code hl_function" href="classxtd_1_1io_1_1text__reader_a5814699d7ec7e5eada3a000f0b0475a6.html#a5814699d7ec7e5eada3a000f0b0475a6">read_to_end</a>();</div>
<div class="line">  <a class="code hl_enumvalue" href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2a83878c91171338902e0fe0fb97a8c47a">p</a>.wait_for_exit();</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_function" href="classxtd_1_1console_ae0ccd7fef284ccda33a88576c8a35a37.html#ae0ccd7fef284ccda33a88576c8a35a37">console::write_line</a>(<span class="stringliteral">&quot;\nError stream: {}&quot;</span>, output);</div>
<div class="line">}</div>
<div class="line"><span class="comment">// The example displays the following output:</span></div>
<div class="line"><span class="comment">//      The last 40 characters in the output stream are:</span></div>
<div class="line"><span class="comment">//      &#39;: 99.80%</span></div>
<div class="line"><span class="comment">//      Line 500 of 500 written: 100.00%</span></div>
<div class="line"><span class="comment">//      &#39;</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//      Error stream: Successfully wrote 500 lines.</span></div>
<div class="ttc" id="aclassxtd_1_1diagnostics_1_1data__received__event__args_html"><div class="ttname"><a href="classxtd_1_1diagnostics_1_1data__received__event__args.html">xtd::diagnostics::data_received_event_args</a></div><div class="ttdoc">Provides data for the xtd::diagnostics::process::output_data_received and xtd::diagnostics::process::...</div><div class="ttdef"><b>Definition</b> data_received_event_args.h:28</div></div>
<div class="ttc" id="agroup__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2_html_ggad94b2f43c7550180321e0ac4b02a4ff2ae1671797c52e15f763380b45e841ec32"><div class="ttname"><a href="group__xtd__core_gad94b2f43c7550180321e0ac4b02a4ff2.html#ggad94b2f43c7550180321e0ac4b02a4ff2ae1671797c52e15f763380b45e841ec32">xtd::console_key::e</a></div><div class="ttdeci">@ e</div><div class="ttdoc">The E key.</div></div>
</div><!-- fragment --> </dd>
<dd>
You can use asynchronous read operations to avoid these dependencies and their deadlock potential. Alternately, you can avoid the deadlock condition by creating two threads and reading the output of each stream on a separate thread. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>You cannot mix asynchronous and synchronous read operations on a redirected stream. Once the redirected stream of a <a class="el" href="classxtd_1_1diagnostics_1_1process.html" title="Provides access to local and remote processes and enables you to start and stop local system processe...">xtd::diagnostics::process</a> is opened in either asynchronous or synchronous mode, all further read operations on that stream must be in the same mode. For example, do not follow xtd::diagnostics::process::begin_error_read_line with a call to <a class="el" href="classxtd_1_1io_1_1text__reader_a9cf821e2697031031471e69c91cce0ca.html#a9cf821e2697031031471e69c91cce0ca" title="Reads a line of characters from the current stream and returns the data as a string.">xtd::io::stream_reader::read_line</a> on the <a class="el" href="classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html#a9e09a8c158d401459b4ab4aa37a6f06e" title="Gets a stream used to read the error output of the application.">xtd::diagnostics::process::standard_error</a> stream, or vice versa. However, you can read two different streams in different modes. For example, you can call xtd::diagnostics::process::begin_output_read_line and then call xtd::io::sstream_reader::read_line for the <a class="el" href="classxtd_1_1diagnostics_1_1process_a9e09a8c158d401459b4ab4aa37a6f06e.html#a9e09a8c158d401459b4ab4aa37a6f06e" title="Gets a stream used to read the error output of the application.">xtd::diagnostics::process::standard_error</a> stream. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacextd.html">xtd</a></li><li class="navelem"><a class="el" href="namespacextd_1_1diagnostics.html">diagnostics</a></li><li class="navelem"><a class="el" href="classxtd_1_1diagnostics_1_1process.html">process</a></li>
		<li class="footer">Generated on Mon Sep 2 2024 21:04:15 for xtd by <a href="https://gammasoft71.wixsite.com/gammasoft">Gammasoft</a>. All rights reserved.</li>
  </ul>
</div>
</body>
</html>
