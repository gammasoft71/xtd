cmake_minimum_required(VERSION 3.20)

# Solution
project(src)
include("../scripts/cmake/xtd_commands.cmake")
include("../scripts/cmake/xtd_version.cmake")

set(XTD_HEADER_FILE "xtd/include/xtd/xtd.hpp")
file(WRITE ${XTD_HEADER_FILE} 
  "// This code was generated by CMake script.\n"
  "//\n"
  "// Changes to this file may cause incorrect behavior and will be lost if the file is regenerated.\n"
  "\n"
  "/// @file\n"
  "/// @brief Contains xtd library headers.\n"
  "/// @copyright Copyright (c) 2025 Gammasoft. All rights reserved.\n"
  "#pragma once\n"
  "#include \"xtd/xtd.core\"\n"
  "#include \"xtd/xtd.drawing\"\n"
  "#include \"xtd/xtd.forms\"\n"
  "#include \"xtd/xtd.tunit\"\n"
  "#include \"xtd/system_report\"\n"
)

set(XTD_CMAKE_REFERENCES "xtd/references.cmake")
file(WRITE ${XTD_CMAKE_REFERENCES} 
  "# This code was generated by CMake script.\n"
  "#\n"
  "# Changes to this file may cause incorrect behavior and will be lost if the file is regenerated.\n"
  "#\n"
  "add_references(xtd.core)\n"
  "add_references(xtd.drawing)\n"
  "add_references(xtd.forms)\n"
  "add_references(xtd.tunit)\n"
)

# Remarks : 
# for 3rdparty libraries don't forget modify target_type macro (SHARED_LIBRARY) in scripts/cmake/xtd_command.cmake file to skip target_link_libraries with xtd.core

# Projects
add_projects(
  ${XTD_CORE_NATIVE_3RDPARTY_LIBRARIES} 
  xtd.core.native 
  ${XTD_CORE_NATIVE_LIBRARY} 
  xtd.core
  xtd.drawing.native 
  ${XTD_DRAWING_NATIVE_LIBRARY}
  xtd.drawing
  xtd.forms.native
  ${XTD_FORMS_NATIVE_LIBRARY}
  xtd.forms
  xtd.tunit
  xtd
)
