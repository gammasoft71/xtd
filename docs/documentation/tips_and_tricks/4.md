# xtd::collections::array_list a heterogeneous container supporting multiple types (ðŸŸ¢ Beginner)

How to store any type with a simple xtd collection, and allow them to be easily manipulated.

## Simple example

```cpp
#include <xtd/xtd>

auto main() -> int {
  for (auto item : collections::array_list {"42", 42, 42_s, .42}) {
    console::write("{,-8} --> ", item);
    if (is<string>(item)) console::write_line("{}", as<string>(item).quoted());
    else if (is<int>(item)) console::write_line("0x{:X4}", as<int>(item));
    else if (is<time_span>(item)) console::write_line("{} seconds", as<time_span>(item).seconds());
    else console::write_line("[{}]", item);
  }
}
```

```cpp
// This code can produce the following output:
//
// 42       --> "42"
// 42       --> 0x002A
// 00:00:42 --> 42 seconds
// 0.42     --> [0.42]
```

*	[xtd::collections::array_list](https://gammasoft71.github.io/xtd/reference_guides/latest/group__collections.html#ga83a0a06ecb97330626993339079ebbf6) allows you to store any type.
* The operator [xtd::is](https://gammasoft71.github.io/xtd/reference_guides/latest/group__xtd__core.html#ga1bfa9e11607cad616748a8ef5d2a99c9) easily determines the type of the stored value.
* The operator [xtd::as](https://gammasoft71.github.io/xtd/reference_guides/latest/group__xtd__core.html#ga7950c22da6547a30812729fb21dcbea7) intuitively converts the stored value into the desired type.
* No macros or hidden tricks â€” only modern C++.

## Custom types

Yes, of course you can store your own type in [xtd::collections::array_list](https://gammasoft71.github.io/xtd/reference_guides/latest/group__collections.html#ga83a0a06ecb97330626993339079ebbf6).

```cpp
#include <xtd/xtd>

struct foo {
  int value;
  
  bool operator ==(const foo& f) const noexcept {return value == f.value;}
  bool operator <(const foo& f) const noexcept {return value < f.value;}
  bool operator >(const foo& f) const noexcept {return value > f.value;}
};

struct bar : public icomparable<bar>, public iequatable<bar> {
  bar() = default;
  bar(int value) : value {value} {}
  
  int32 compare_to(const bar& obj) const noexcept override {return value < obj.value ? -1 : value > obj.value ? 1 : 0;}
  bool equals(const bar& obj) const noexcept override {return value == obj.value;}
  
  int value;
  
};

auto main() -> int {
  for (auto item : collections::array_list {"42", 42, 42_s, .42, foo {42}, bar {42}}) {
    console::write("{,-8} --> ", item);
    if (is<string>(item)) console::write_line("{}", as<string>(item).quoted());
    else if (is<int>(item)) console::write_line("0x{:X4}", as<int>(item));
    else if (is<time_span>(item)) console::write_line("{} seconds", as<time_span>(item).seconds());
    else if (is<foo>(item)) console::write_line("f{}", as<foo>(item).value);
    else if (is<bar>(item)) console::write_line("b{}", as<bar>(item).value);
    else console::write_line("[{}]", item);
  }
}
```

```cpp
// This code can produce the following output:
//
// 42       --> "42"
// 42       --> 0x002A
// 00:00:42 --> 42 seconds
// 0.42     --> [0.42]
// foo      --> f42
// bar      --> b42
```

*	The only constraint is to declare at least the following three operators: `==`, `<` and `>` as in the example with the `foo` structure.
* Or to inherit the interfaces [xtd::icomparable](https://gammasoft71.github.io/xtd/reference_guides/latest/classxtd_1_1icomparable.html) and [xtd::iequatable](https://gammasoft71.github.io/xtd/reference_guides/latest/classxtd_1_1iequatable.html) as in the example with the structure `bar`.

## Conclusion

* It has never been easier to store and manipulate a heterogeneous set of elements in a collection in C++ than with xtd.
* In modern C++ we could use a [`std::vector<std::any>`](https://en.cppreference.com/w/cpp/container/vector.html) but not as easy and as advanced as [xtd::collections::array_list](https://gammasoft71.github.io/xtd/reference_guides/latest/group__collections.html#ga83a0a06ecb97330626993339079ebbf6) does not allow it.
* [std::variant](https://en.cppreference.com/w/cpp/utility/variant.html) would also be a possibility but it forces you to know the types in advance and with the disadvantage also of being much more verbose.
* Other libraries / frameworks such as Boost and Qt also allow you to store a set of varied types but not with the simplicity and elegance of [xtd::collections::array_list](https://gammasoft71.github.io/xtd/reference_guides/latest/group__collections.html#ga83a0a06ecb97330626993339079ebbf6).
* Indeed [xtd::collections::array_list](https://gammasoft71.github.io/xtd/reference_guides/latest/group__collections.html#ga83a0a06ecb97330626993339079ebbf6) keeps readability by manipulating directly [xtd::is](https://gammasoft71.github.io/xtd/reference_guides/latest/group__xtd__core.html#ga1bfa9e11607cad616748a8ef5d2a99c9) / [xtd::as](https://gammasoft71.github.io/xtd/reference_guides/latest/group__xtd__core.html#ga7950c22da6547a30812729fb21dcbea7) without manual casting or [std::any_cast](https://en.cppreference.com/w/cpp/utility/any/any_cast).

> **Did you know?**
>
> There is also a container [xtd::collections::hash_table](https://gammasoft71.github.io/xtd/reference_guides/latest/group__collections.html#ga5a1cbe0162263e2c6626f996ca032078) which allows as [xtd::collections::array_list](https://gammasoft71.github.io/xtd/reference_guides/latest/group__collections.html#ga83a0a06ecb97330626993339079ebbf6) to manage a collection of heterogeneous types but sorted on a key that can itself be of different types.

## To go further

* [xtd::collections::array_list](https://gammasoft71.github.io/xtd/reference_guides/latest/group__collections.html#ga83a0a06ecb97330626993339079ebbf6) uses a [xtd::any_object](https://gammasoft71.github.io/xtd/reference_guides/latest/classxtd_1_1any__object.html) to store the different types.
* [xtd::any_object](https://gammasoft71.github.io/xtd/reference_guides/latest/classxtd_1_1any__object.html) is used by different xtd components. As for example:
  * [xtd::threading::parameterized_thread_start](https://gammasoft71.github.io/xtd/reference_guides/latest/group__delegates.html#ga1961ded285db6ac6d364694eda5379a3) used by [xtd::threading::thread](https://gammasoft71.github.io/xtd/reference_guides/latest/classxtd_1_1threading_1_1thread.html) to start a thread with parameter.
  * [xtd::forms::control::tag](https://gammasoft71.github.io/xtd/reference_guides/latest/classxtd_1_1forms_1_1control.html#a688b27af8a0fa5572022c422bcb3eba1) to store a user object, like all other components using the tag.

## See also

* [Tips & Tricks](/docs/documentation/tips_and_tricks)
* [Documentation](/docs/documentation)
